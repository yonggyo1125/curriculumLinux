# 파일 압축과 묶기

## 파일 압축

- 리눅스에서 많이 볼 수 있는 압축 파일의 확장명은 xz, bz2, gz, zip, Z 등이다. 예전에는 주로 확장명 gz를 사용했으나, 최근에는 압축률이 더 좋은 xz나 bz2를 더 많이 사용하는 추세다. 이 파일들을 관리하는 명령어는 다음과 같다.

#### xz

- 확장명 xz로 압축하거나 풀어줌. 비교적 최신 압축 명령이며 압축이 뛰어남
- 사용 예

```
# xz 파일이름   -> '파일 이름'을 압축 파일인 '파일이름.xz'로 만들며 <b>기존 파일은 삭제됨</b>
# xz -d 파일 이름.xz(d는 Decompress의 의미)
		-> '파일이름.xz' 압축 파일을 일반 파일인 '파일이름'으로 만듬
# xz -l 파일이름.xz(l은 List의 의미)
		-> '파일이름.xz' 압축 파일에 포함된 파일 목록과 압축률 등을 출력
		
# xz -k 파일이름(k는 Keep의 의미)
		-> 압축 후에 기존 파일을 삭제하지 않고 그대로 둠
```

#### bzip2 

- 확장명 bz2로 압축하거나 풀어줌
- 사용 예

```
# bzip2 파일이름   -> '파일이름'을 압축 파일인 '파일이름.bz2'로 만듬
# bzip2 -d 파일이름.bz2     -> '파일이름.bz2' 압축 파일을 일반 파일인 '파일이름'으로 만듬
```


#### bunzip2

- 확장명 bz2의 압축을 풀어줌
- 'bzip2 -d'와 동일한 명령


#### gzip

- 확장명 gz로 압축하거나 풀어줌
- 사용 예

```
# gzip 파일이름   -> '파일이름'을 압축 파일인 '파일명.gz'로 만듬
# gzip -d 파일이름.gz  -> '파일이름.gz' 압축 파일을 일반 파일인 '파일이름'으로 만듬
```

#### gunzip

- 확장명 gz의 압축을 풀어줌
- 'gzip -d'와 동일한 명령

#### zip

- Windows용과 호환되는 확장명 zip으로 압축하거나 풀어줌
- 사용 예

```
# zip 설정할파일이름.zip 압축할파일이름
		-> 압축할 파일 이름을 '새로생성할파일이름.zip'으로 만듦
```

#### unzip

- Windows 용과 호환되는 zip으로 묶은 압축 파일을 풀어줌
- 사용 예

```
# unzip 압축파일이름.zip    -> '압축파일이름.zip'의 압축을 풀어줌
```

## 파일 묶기

- 알집(Alzip)이나 반디집(bandizip) 같은 Windows용 압축 프로그램을 생각해보면 aaa, bbb라는 2개 파일을 압축했을 때 ccc.zip이라는 1개의 압축 파일이 생긴다. 즉 aaa와 bbb라는 두 파일이 ccc라는 1개의 파일로 묶인 후 압축된 것이다. 이는 Windows 압축 프로그램이 '파일 압축'과 '파일 묶기'를 한꺼번에 하기 때문이다.

- 이와 조금 다르게 <b>리눅스(유닉스)에서는 '파일 압축'과 '파일 묶기'를 원칙적으로 별개의 프로그램으로 실행하도록 되어 있다.</b> 물론 사용자 편의를 위해 한 번에 할 수 있는 옵션도 제공한다. 파일 묶기 명령어는 tar이며 묶인 파일의 확장명도 tar다.

#### tar 
- 확장명 tar로 묶음 파일을 만들거나 묶음을 풀어줌

- 동작
	- c(소문자)  -> 새로운 묶음을 만듦
	- x       -> 묶인 파일을 풀어줌
	- t       -> 묶음을 풀기 전에 묶인 경로를 보여줌
	- C(대문자)  -> 묶음을 풀 때 지정된 디렉토리에 압출을 풀어줌.<br>지정하지 않으면 묶을 때와 동일한 디렉토리에 묶음이 풀림

- 옵션
	- f(필수)    -> 묶음 파일 이름 지정. 원래 tar은 테이프(tape) 장치 백업이 기본임(생략하면 테이프로 보내짐)
	- v     -> visual의 의미로 파일이 묶이거나 풀리는 과정을 보여줌(생략가능)
	- J(대문자)   -> tar + xz
	- z(소문자)  -> tar + gzip
	- j(소문자)   -> tar + bzip2
	
-  사용 예

```
# tar cvf my.tar /etc/sysconfig/  -> 묶기 
# tar cvfJ my.tar.xz /etc/sysconfig/  -> 묶기 + xz 압축
# tar cvfz my.tar.gz /etc/sysconfig/  -> 묶기 + gzip 압축
# tar cvfj my.tar.bz2 /etc/sysconfig  -> 묶기 + bzip2 압축
# tar tvf my.tar   -> 파일 확인
# tar xvf my.tar   -> tar 풀기
# tar cxvf newdir my.tar     -> newdir에 tar 풀기
# tar xfJ my.tar.xz      -> xz 압축 해제 + tar 풀기
# tar xfz my.tar.gz     -> gzip 압축 해제 + tar 풀기
# tar xfj my.tar.bz2    -> bzip2 압축 해제 + tar 풀기
```

- 자주 사용할 명령은 <b>tar xvfJ 파일이름.tar.xz</b> 명령과 <b>tar xvfj 파일이름.tar.bz2</b> 명령 정도다. 최소한 두 가지 명령은 기억해놓자.

* * * 
# 파일 위치 검색

- 리눅스에서 특정 파일의 위치를 검색하는 명령어는 다음과 같다. 가장 많이 사용되는 명령어는 find다. 다음 


#### find 경로 옵션 조건 action

- 옵션  -> -name, -user(소유자), -newer(전, 후), -perm(허가권), -size(크기)
- action -> -print(기본값), -exec(외부 명령 실행)

- 기본 사용 예

```
# find /etc -name "*.conf"  -> '/etc' 디렉토리 하위에 확장자명이 "*.conf"인 파일 검색
# find /home -user centos  -> '/home' 디렉토리 하위에 소유자가 centos인 파일 검색
# find ~ -perm 644    -> 현재 사용자의 홈디렉토리 하위에 허가권이 644인 파일 검색
# find /usr/bin -size +10k -size -100k
		-> /usr/bin 디렉토리 하위의 파일 크기가 10KB~100KB인 파일 검색
```

- 고급 사용 예

```
# find ~ -size 0k -exec ls -l { } \;
		-> 현재 사용자의 홈 디렉터리 하위에 파일 크기가 0인 파일의 목록을 상세히 출력
		
# find /home -name "*.swp" -exec rm { } \;
		-> /home 디렉토리의 하위에 확장명이 *.swp인 파일 삭제
```